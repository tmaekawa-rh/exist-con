from rest_framework import viewsets
from rest_framework.filters import SearchFilter, FilterSet
from django_filters import DateTimeFromToRangeFilter, CharFilter
from django_filters.rest_framework import DjangoFilterBackend
from apps.exploit.models import Exploit
from apps.exploit.serializers import exSerializer

class exFilter(FilterSet):
    datetime = DateTimeFromToRangeFilter()
    class Meta:
        model = Exploit
        fields = ['datetime']

class exViewSet(viewsets.ReadOnlyModelViewSet):
    queryset = Exploit.objects.order_by('-datetime')
    serializer_class = exSerializer
    filter_class = exFilter
    filter_backends = (SearchFilter, DjangoFilterBackend)
    search_fields = ['$title', '$description', '$text']
